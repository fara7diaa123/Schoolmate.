<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8">
  <title>ุงูุบูุงุจ ูุงูุญุถูุฑ โ SchoolMate</title>
</head>
<body bgcolor="#C8BBBE">
  <h1 align="center">ุงูุบูุงุจ ูุงูุญุถูุฑ</h1>
  <p align="center">ุณุฌู ุญุถูุฑ ุงูุทูุงุจ ูููููุง ุจุณูููุฉ</p>
  <hr color="black" size="3">

  <div align="center">
    <button onclick="clearData()">๐ ูุณุญ ูู ุงูุจูุงูุงุช</button>
  </div>
  <br>

  <table border="1" width="90%" align="center" cellpadding="3" bgcolor="#DEB887" id="attendanceTable">
    <tr bgcolor="#C58917">
      <th>ุงูุงุณู</th>
      <!-- ุงูุนูุงููู ูุชุชููุฏ ุจุงูู JavaScript -->
    </tr>

    <tr>
      <td>ุนูุงุฑ</td>
    </tr>
    <tr>
      <td>ุบุฒู</td>
    </tr>
    <tr>
      <td>ุณุงูููู</td>
    </tr>
    <tr>
      <td>ูุญูุฏ</td>
    </tr>
  </table>

  <br>
  <p style="cursor:pointer; color:blue;" onclick="window.location.href='index.html'">โฌ ุงูุฑุฌูุน ููุตูุญุฉ ุงูุฑุฆูุณูุฉ</p>

  <script>
    const days = ["ุงูุฃุญุฏ","ุงูุฅุซููู","ุงูุซูุงุซุงุก","ุงูุฃุฑุจุนุงุก","ุงูุฎููุณ","ุงูุฌูุนุฉ","ุงูุณุจุช"];
    const table = document.getElementById("attendanceTable");
    const startDate = new Date(2025, 9, 12); // ุงูุฃุญุฏ 12 ุฃูุชูุจุฑ 2025 (ุงูุดูุฑ 9 ูุฃู ุงูุฃุดูุฑ ุชุจุฏุฃ ูู 0)
    const totalDays = 14; // ุฃุณุจูุนูู

    // ุชูููุฏ ุงูุตู ุงูุนููู (ุงูุนูุงููู)
    for (let i = 0; i < totalDays; i++) {
      let dayIndex = (startDate.getDay() + i) % 7;
      let date = new Date(startDate);
      date.setDate(startDate.getDate() + i);
      let header = document.createElement("th");
      header.innerText = days[dayIndex] + " " + date.toLocaleDateString("ar-EG");
      table.rows[0].appendChild(header);
    }

    // ุชูููุฏ ุงูุฃุฒุฑุงุฑ ููู ุทุงูุจ
    for (let r = 1; r < table.rows.length; r++) {
      let studentName = table.rows[r].cells[0].innerText;
      for (let c = 0; c < totalDays; c++) {
        let cell = document.createElement("td");

        if (days[(startDate.getDay() + c) % 7] === "ุงูุฌูุนุฉ" || days[(startDate.getDay() + c) % 7] === "ุงูุณุจุช") {
          cell.innerHTML = "ุฅุฌุงุฒุฉ";
          cell.bgColor = "#EBDDE2";
          cell.style.fontSize = "10px";
        } else {
          let presentBtn = document.createElement("button");
          presentBtn.innerText = "โ";
          presentBtn.onclick = function () { markAttendance(studentName, c, "ุญุถูุฑ", cell); };

          let absentBtn = document.createElement("button");
          absentBtn.innerText = "โ";
          absentBtn.onclick = function () { markAttendance(studentName, c, "ุบูุงุจ", cell); };

          cell.appendChild(presentBtn);
          cell.appendChild(absentBtn);

          // ุชุญููู ุงูุญุงูุฉ ูู ุงูุชุฎุฒูู
          let saved = localStorage.getItem(studentName + "_" + c);
          if (saved) {
            if (saved === "ุญุถูุฑ") {
              cell.style.backgroundColor = "#4CAF50";
              cell.innerHTML = "โ ุญุถูุฑ";
            } else if (saved === "ุบูุงุจ") {
              cell.style.backgroundColor = "#F44336";
              cell.innerHTML = "โ ุบูุงุจ";
            }
          }
        }

        table.rows[r].appendChild(cell);
      }
    }

    // ุฏุงูุฉ ุชุณุฌูู ุงูุญุถูุฑ/ุงูุบูุงุจ
    function markAttendance(student, day, status, cell) {
      if (status === "ุญุถูุฑ") {
        cell.style.backgroundColor = "#4CAF50";
        cell.innerHTML = "โ ุญุถูุฑ";
      } else {
        cell.style.backgroundColor = "#F44336";
        cell.innerHTML = "โ ุบูุงุจ";
      }
      localStorage.setItem(student + "_" + day, status);
    }

    // ุฏุงูุฉ ูุณุญ ุงูุจูุงูุงุช
    function clearData() {
      if (confirm("ูู ุฃูุช ูุชุฃูุฏ ุฃูู ุชุฑูุฏ ูุณุญ ุฌููุน ุงูุจูุงูุงุชุ")) {
        localStorage.clear();
        location.reload(); // ุฅุนุงุฏุฉ ุชุญููู ุงูุตูุญุฉ
      }
    }
  </script>
</body>
</html>
